<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
    <!-- <script src="/app.js"></script> -->
    <link rel="stylesheet" href="/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@700;900&display=swap" rel="stylesheet">
    <script>
        window.onload = function () {

            //gameplay / algorithm
            //player selects rock, paper, or scissors
            //3 buttons. Dataset assigns each value (rock, paper, scissors).
            //Click event triggers function
            //computer randomly chooses rock, paper, or scissors
            //output result to document
            //at end of turn, record point to who won
            //first to 5 wins

            //storing variabeles for scores
            let playerScore = 0;
            let computerScore = 0;

            //storing variables for selections
            let playerSelection
            let computerSelection

            //storing variables for html elements
            const resultText = document.getElementById('result-text');
            const playerScoreEl = document.getElementById('player-score');
            const computerScoreEl = document.getElementById('computer-score');


            //button elements with click events. These trigger the gameTurn function.
            const buttons = document.querySelectorAll('.button');
            for (let i = 0; i < buttons.length; i++) {
                buttons[i].addEventListener('click', gameTurn)
            }

            let disableBtns = function () {
                buttons.preventDefault();
            }

            const resetGame = function () {
                //reset scores to 0
                computerScore = 0;
                playerScore = 0;
                computerScoreEl.innerHTML = computerScore;
                playerScoreEl.innerHTML = playerScore;

                //reset inner html to 0
                resultText.innerHTML = ""

                //reset top text
                document.getElementById('result-text').innerHTML = "Choose Rock Paper or Scissors üëá";

                //btns clickable again
                document.getElementById('rps-btns').style.pointerEvents = "auto";

                //btns reset color
                const buttons = document.querySelectorAll('.button');
                for (let i = 0; i < buttons.length; i++) {
                    buttons[i].style.backgroundColor = "blue";
                }
            }

            //button for reset game
            const resetBtn = document.getElementById('reset-btn');
            resetBtn.addEventListener('click', resetGame)

            playerScoreEl.innerHTML = 0;
            computerScoreEl.innerHTML = 0;

            function gameTurn(playerSelection, computerSelection) {

                playerSelection = (this.dataset.name)

                let rockPaperScissors = ['rock', 'paper', 'scissors']
                computerSelection = rockPaperScissors[Math.floor(Math.random() * rockPaperScissors.length)];

                if (playerSelection === 'rock' && computerSelection === 'paper' ||
                    playerSelection === 'paper' && computerSelection === 'scissors' ||
                    playerSelection === 'scissors' && computerSelection === 'rock'
                ) {
                    resultText.innerHTML = computerSelection + ' beats ' + playerSelection +
                        '. Better luck next time üôÄ'
                    computerScore++;
                    computerScoreEl.innerHTML = computerScore;
                }
                if (playerSelection === 'paper' && computerSelection === 'rock' ||
                    playerSelection === 'rock' && computerSelection === 'scissors' ||
                    playerSelection === 'scissors' && computerSelection === 'paper'
                ) {
                    resultText.innerHTML = playerSelection + ' beats ' + computerSelection +
                        '. You win, way to go! üò∫'
                    playerScore++;
                    playerScoreEl.innerHTML = playerScore;
                }
                if (playerSelection === computerSelection) {
                    resultText.innerHTML = 'Both chose ' + playerSelection + ". It's a draw üòΩ"
                }
                if (computerScore === 5 || playerScore === 5) {
                    if (computerScore === 5) {
                        resultText.innerHTML = 'Game Over! Computer Wins üíª';
                    }
                    if (playerScore === 5) {
                        resultText.innerHTML = 'You win! üéâ'
                    }
                    document.getElementById('rps-btns').style.pointerEvents = "none";
                    const buttons = document.querySelectorAll('.button');
                    for (let i = 0; i < buttons.length; i++) {
                        buttons[i].style.backgroundColor = "grey";
                    }
                }
                console.log(playerSelection, playerScore, computerSelection, computerScore)
            }
        }
    </script>
</head>

<body>
    <div class="container-main">
        <h5 id="result-text">Choose Rock Paper or Scissors üëá</h5>

        <div class="container" id='rps-btns'>
            <div class='button aqua' data-name='rock'><img src="/assets/rock.png" alt="rock"></div>
            <div class='button purple' data-name='paper'><img src="/assets/paper.png" alt="paper"></div>
            <div class='button blue' data-name='scissors'><img src="/assets/scissors.png" alt="scissors">
            </div>
        </div>
        <div class="container">
            <div class="score-section">
                <p>üòÄ Player Score: <span id="player-score"></span></p>
                <p>üíª Computer Score: <span id="computer-score"></span></p>
            </div>
        </div>
        <div class='container'>
            <div id='reset-btn' class="reset-section">
                <p>‚ö°Ô∏è Reset Game</p>
            </div>
        </div>
    </div>
</body>

</html>